---
import type { Layer } from "../types";

// src/components/Viewer.astro
interface Props {
    initialLayers: Layer[];
}

const { initialLayers } = Astro.props;
---

<div class="viewer-container">
    <canvas id="layerViewer"></canvas>
    <div id="layerInfo" class="layer-info"></div>
</div>

<script client:load define:vars={{ initialLayers }}>
    // This script will be bundled and optimized by Astro
    import { LayerViewer } from "../scripts/viewer";

    document.addEventListener("DOMContentLoaded", () => {
        new LayerViewer("layerViewer", initialLayers);
    });
</script>

<style>
    .viewer-container {
        position: relative;
        width: 100%;
        max-width: 1920px;
        margin: 0 auto;
    }

    .layer-info {
        position: fixed;
        right: 0;
        top: 0;
        width: 300px;
        height: 100%;
        background: white;
        padding: 20px;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
        transform: translateX(100%);
        transition: transform 0.3s ease;
    }

    .layer-info.active {
        transform: translateX(0);
    }
</style>
